<div class="produit-page">
    <header class="header-section">
        <h2>Gestion de l'Inventaire</h2>
        <p>G√©rez vos produits avec un contr√¥le de stock pr√©cis et des visuels haute d√©finition.</p>
    </header>

    <div class="form-container">
        <h3>{{ isEditing ? '‚ö° MODIFIER' : '‚ûï AJOUTER' }} UN PRODUIT</h3>
        <input [(ngModel)]="newProduit.ref_produit" placeholder="R√©f√©rence (ex: PC-001)">
        <input [(ngModel)]="newProduit.libelle_produit" placeholder="Libell√© du produit">
        <input type="number" [(ngModel)]="newProduit.prix_unitaire" placeholder="Prix Unitaire (‚Ç¨)">
        <input type="number" [(ngModel)]="newProduit.qte_stock" placeholder="Stock Initial">
        <input [(ngModel)]="newProduit.imageUrl" placeholder="URL Image (Optionnel)">

        <button class="btn-primary" (click)="saveProduit()">
            {{ isEditing ? 'METTRE √Ä JOUR' : 'ENREGISTRER' }}
        </button>
        <button class="btn-icon" (click)="resetForm()" *ngIf="isEditing">ANNULER</button>
    </div>

    <div class="product-grid">
        <div class="product-card" *ngFor="let produit of produits; let i = index"
            [style.animation-delay]="(i * 0.1) + 's'">
            <div class="image-container">
                <img *ngIf="produit.imageUrl" [src]="produit.imageUrl" alt="Product" class="product-image">
                <div *ngIf="!produit.imageUrl" class="no-image">üì¶</div>
            </div>

            <div class="card-content">
                <div class="prod-ref">{{ produit.ref_produit }}</div>
                <h4>{{ produit.libelle_produit }}</h4>

                <div class="price-stock">
                    <div class="price">{{ produit.prix_unitaire | currency:'EUR' }}</div>
                    <div [class]="'stock-badge ' + getStockClass(produit.qte_stock)">
                        {{ produit.qte_stock > 0 ? (produit.qte_stock + ' EN STOCK') : 'RUPTURE' }}
                    </div>
                </div>

                <div class="card-actions">
                    <button class="btn-icon" (click)="editProduit(produit)">‚úèÔ∏è MODIFIER</button>
                    <button class="btn-icon btn-delete" (click)="deleteProduit(produit.id_produit!)">üóëÔ∏è
                        SUPPRIMER</button>
                </div>
            </div>
        </div>
    </div>
</div>